<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.retailers.dao.IManageLoginDao">

    <sql id="userFullNameColumns">
        a.id AS "id",
        a.login_name AS "loginName",
        a.login_password AS "loginPassword",
        a.real_name AS "realRame",
        a.office_id AS "officeId",
        a.position AS "position",
        a.email AS "email",
        a.phone AS "phone",
        a.mobile AS "mobile",
        a.user_type AS "userType",
        a.remarks AS "remarks",
        a.login_flag AS "loginFlag",
        a.del_flag AS "delFlag",
        b.office_name AS "office.officeName",
        c.role_name AS "group.roleName"
    </sql>

    <sql id="leftJionColumns">
        LEFT JOIN manage_office AS b  ON  a.office_id=b.id
        LEFT JOIN  role AS  c  on a.user_type =c.id
    </sql>

    <select id="getAll" resultType="ManageLogin">
        SELECT
        <include refid="userFullNameColumns"/>
        FROM   manage_login  a
        <include refid="leftJionColumns"/>
        <where>
            AND a.del_flag='0'
        </where>

    </select>

     <select id="getUserForUserName" resultType="ManageLogin">
         SELECT  
         <include refid="userFullNameColumns"/>
         FROM   manage_login  a
         <include refid="leftJionColumns"/>
         <where>
             a.login_name=#{loginName}
             AND a.del_flag='0'
         </where>

     </select>

</mapper>